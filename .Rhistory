geom_bin2d(data = iniesta2, aes(x=location.x, y=location.y)
cancha +
geom_bin2d(data = iniesta2, aes(x=location.x, y=location.y))
cancha +
geom_bin2d(data = iniesta2, aes(x=location.x, y=location.y))
cancha +
geom_bin2d(data = iniesta2, aes(x=location.x, y=location.y), bins=10)
cancha +
geom_bin2d(data = iniesta2, aes(x=location.x, y=location.y), bins=100)
cancha +
geom_density(data = iniesta2, aes(x=location.x, y=location.y))
cancha +
geom_density(data = iniesta2, aes(x=location.x, y=location.y))
cancha +
geom_density2d(data = iniesta2, aes(x=location.x, y=location.y))
cancha +
geom_density2d(data = iniesta2, aes(x=location.x, y=location.y)fill=stat(level))
cancha +
geom_density2d(data = iniesta2, aes(x=location.x, y=location.y),fill=stat(level))
cancha +
geom_density2d(data = iniesta2, aes(x=location.x, y=location.y,fill=stat(level)))
cancha +
geom_density2d(data = iniesta2, aes(x=location.x, y=location.y,color=stat(level)))
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y))
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.1)
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.4)
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
cancha
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
cancha
ggplot() +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
cancha
ggplot() +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
cancha
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
guides(fill=F)
cancha +
geom_point(data = iniesta2, aes(x=pass.end_location.x, y=pass.end_location.y)) +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
guides(fill=F)
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
geom_point(data = iniesta2, aes(x=pass.end_location.x, y=pass.end_location.y)) +
guides(fill=F)
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
geom_point(data = iniesta2, aes(x=pass.end_location.x, y=pass.end_location.y),alpha=0.6) +
guides(fill=F)
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
geom_point(data = iniesta2, aes(x=pass.end_location.x, y=pass.end_location.y),alpha=0.2) +
guides(fill=F)
cancha +
geom_point(data = iniesta2, aes(x=pass.end_location.x, y=pass.end_location.y),alpha=0.2) +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
guides(fill=F)
ggplot() +  geom_rect(aes(xmin = 0, xmax = 68, ymin = 0, ymax = 105), #entire pitch with FIFA dimensions
fill = background_color,
colour = foreground_color,
size = .5) +
geom_circle(aes(x0 = 68 / 2, y0 = 105 / 2, r = 9.15), colour=foreground_color) + #centre circle
geom_circle(aes(x0 = 68 / 2, y0 = 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_circle(aes(x0 = 68 / 2, y0 = 105 - 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 0, ymax = 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 105, ymax = 105 - 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_point(aes(x = 68 / 2, y = 11), colour=foreground_color) + #penalty spot
geom_point(aes(x = 68 / 2, y = 105 -11), colour=foreground_color) + #penalty spot
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 0, ymax = 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 105, ymax = 105 - 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_segment(aes(x = 0, y = 105/2, xend = 68, yend = 105/2), colour=foreground_color) + #halfway line
coord_fixed()
background_color <- "#ffffff"
foreground_color <-  "#A9A9A9"
ggplot() +  geom_rect(aes(xmin = 0, xmax = 68, ymin = 0, ymax = 105), #entire pitch with FIFA dimensions
fill = background_color,
colour = foreground_color,
size = .5) +
geom_circle(aes(x0 = 68 / 2, y0 = 105 / 2, r = 9.15), colour=foreground_color) + #centre circle
geom_circle(aes(x0 = 68 / 2, y0 = 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_circle(aes(x0 = 68 / 2, y0 = 105 - 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 0, ymax = 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 105, ymax = 105 - 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_point(aes(x = 68 / 2, y = 11), colour=foreground_color) + #penalty spot
geom_point(aes(x = 68 / 2, y = 105 -11), colour=foreground_color) + #penalty spot
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 0, ymax = 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 105, ymax = 105 - 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_segment(aes(x = 0, y = 105/2, xend = 68, yend = 105/2), colour=foreground_color) + #halfway line
coord_fixed()
library(ggforce)
ggplot() +  geom_rect(aes(xmin = 0, xmax = 68, ymin = 0, ymax = 105), #entire pitch with FIFA dimensions
fill = background_color,
colour = foreground_color,
size = .5) +
geom_circle(aes(x0 = 68 / 2, y0 = 105 / 2, r = 9.15), colour=foreground_color) + #centre circle
geom_circle(aes(x0 = 68 / 2, y0 = 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_circle(aes(x0 = 68 / 2, y0 = 105 - 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 0, ymax = 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 105, ymax = 105 - 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_point(aes(x = 68 / 2, y = 11), colour=foreground_color) + #penalty spot
geom_point(aes(x = 68 / 2, y = 105 -11), colour=foreground_color) + #penalty spot
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 0, ymax = 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 105, ymax = 105 - 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_segment(aes(x = 0, y = 105/2, xend = 68, yend = 105/2), colour=foreground_color) + #halfway line
coord_fixed()
ggplot() +  geom_rect(aes(xmin = 0, xmax = 68, ymin = 0, ymax = 105), #entire pitch with FIFA dimensions
fill = background_color,
colour = foreground_color,
size = .5) +
geom_circle(aes(x0 = 68 / 2, y0 = 105 / 2, r = 9.15), colour=foreground_color) + #centre circle
geom_circle(aes(x0 = 68 / 2, y0 = 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_circle(aes(x0 = 68 / 2, y0 = 105 - 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 0, ymax = 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 105, ymax = 105 - 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_point(aes(x = 68 / 2, y = 11), colour=foreground_color) + #penalty spot
geom_point(aes(x = 68 / 2, y = 105 -11), colour=foreground_color) + #penalty spot
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 0, ymax = 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 105, ymax = 105 - 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_segment(aes(x = 0, y = 105/2, xend = 68, yend = 105/2), colour=foreground_color) + #halfway line
coord_fixed()+
coord_flip()
ggplot() +  geom_rect(aes(xmin = 0, xmax = 68, ymin = 0, ymax = 105), #entire pitch with FIFA dimensions
fill = background_color,
colour = foreground_color,
size = .5) +
geom_circle(aes(x0 = 68 / 2, y0 = 105 / 2, r = 9.15), colour=foreground_color) + #centre circle
geom_circle(aes(x0 = 68 / 2, y0 = 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_circle(aes(x0 = 68 / 2, y0 = 105 - 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 0, ymax = 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 105, ymax = 105 - 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_point(aes(x = 68 / 2, y = 11), colour=foreground_color) + #penalty spot
geom_point(aes(x = 68 / 2, y = 105 -11), colour=foreground_color) + #penalty spot
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 0, ymax = 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 105, ymax = 105 - 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_segment(aes(x = 0, y = 105/2, xend = 68, yend = 105/2), colour=foreground_color) + #halfway line
coord_fixed()+
coord_flip()+
geom_point(data = iniesta2, aes(x=pass.end_location.x, y=pass.end_location.y),alpha=0.2)
ggplot() +  geom_rect(aes(xmin = 0, xmax = 68, ymin = 0, ymax = 105), #entire pitch with FIFA dimensions
fill = background_color,
colour = foreground_color,
size = .5) +
geom_circle(aes(x0 = 68 / 2, y0 = 105 / 2, r = 9.15), colour=foreground_color) + #centre circle
geom_circle(aes(x0 = 68 / 2, y0 = 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_circle(aes(x0 = 68 / 2, y0 = 105 - 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 0, ymax = 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 105, ymax = 105 - 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_point(aes(x = 68 / 2, y = 11), colour=foreground_color) + #penalty spot
geom_point(aes(x = 68 / 2, y = 105 -11), colour=foreground_color) + #penalty spot
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 0, ymax = 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 105, ymax = 105 - 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_segment(aes(x = 0, y = 105/2, xend = 68, yend = 105/2), colour=foreground_color) + #halfway line
coord_fixed()+
coord_flip()+
geom_point(data = iniesta2, aes(x=pass.end_location.x, y=pass.end_location.y),alpha=0.2, color="red3")
ggplot() +
geom_point(data = iniesta2, aes(x=pass.end_location.x, y=pass.end_location.y),alpha=0.2, color="red3")+
geom_rect(aes(xmin = 0, xmax = 68, ymin = 0, ymax = 105), #entire pitch with FIFA dimensions
fill = background_color,
colour = foreground_color,
size = .5) +
geom_circle(aes(x0 = 68 / 2, y0 = 105 / 2, r = 9.15), colour=foreground_color) + #centre circle
geom_circle(aes(x0 = 68 / 2, y0 = 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_circle(aes(x0 = 68 / 2, y0 = 105 - 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 0, ymax = 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 105, ymax = 105 - 16.5), #penalty box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_point(aes(x = 68 / 2, y = 11), colour=foreground_color) + #penalty spot
geom_point(aes(x = 68 / 2, y = 105 -11), colour=foreground_color) + #penalty spot
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 0, ymax = 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 105, ymax = 105 - 5.5), #6 yard box
fill = background_color,
colour = foreground_color,
size = .5) +
geom_segment(aes(x = 0, y = 105/2, xend = 68, yend = 105/2), colour=foreground_color) + #halfway line
coord_fixed()+
coord_flip()
ggplot() +
geom_point(data = iniesta2, aes(x=pass.end_location.x, y=pass.end_location.y),alpha=0.2, color="red3")+
geom_rect(aes(xmin = 0, xmax = 68, ymin = 0, ymax = 105), #entire pitch with FIFA dimensions
colour = foreground_color,
size = .5) +
geom_circle(aes(x0 = 68 / 2, y0 = 105 / 2, r = 9.15), colour=foreground_color) + #centre circle
geom_circle(aes(x0 = 68 / 2, y0 = 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_circle(aes(x0 = 68 / 2, y0 = 105 - 11, r = 9.15), colour=foreground_color) + #penalty arc
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 0, ymax = 16.5), #penalty box
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 16.5, xmax = 68 / 2 + 7.32 / 2 + 16.5, ymin = 105, ymax = 105 - 16.5), #penalty box
colour = foreground_color,
size = .5) +
geom_point(aes(x = 68 / 2, y = 11), colour=foreground_color) + #penalty spot
geom_point(aes(x = 68 / 2, y = 105 -11), colour=foreground_color) + #penalty spot
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 0, ymax = 5.5), #6 yard box
colour = foreground_color,
size = .5) +
geom_rect(aes(xmin = 68 / 2 - 7.32 / 2 - 5.5, xmax = 68 / 2 + 7.32 / 2 + 5.5, ymin = 105, ymax = 105 - 5.5), #6 yard box
colour = foreground_color,
size = .5) +
geom_segment(aes(x = 0, y = 105/2, xend = 68, yend = 105/2), colour=foreground_color) + #halfway line
coord_fixed()+
coord_flip()
View(count(data,player.name))
View(iniesta2)
cancha +
geom_point(data = filter(iniesta2,pass.goal_assist==T), aes(x=location.x, y=location.y)) +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, colour = "#D43B47")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y, color=pass.goal_assist)) +
geom_segment(data = iniesta2, aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, colour = "#D43B47")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y, color=pass.goal_assist)) +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, colour = "#D43B47")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.1) +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, colour = "#D43B47")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.1, color=NA) +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, colour = "#D43B47")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.1, fill=NA) +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, colour = "#D43B47")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.1, colour=NA, fill="red3") +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, colour = "#D43B47")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.1, colour=NA, color="red3") +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, colour = "#D43B47")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.1, colour=NA, fill="red3") +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, colour = "#D43B47")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y, colour=pass.goal_assist),alpha=0.1)
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y, colour=pass.goal_assist),alpha=0.1) +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, colour = "#D43B47")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y, colour=pass.goal_assist),alpha=0.1) +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75,alpha=0.6, colour = "red3")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y, colour=pass.goal_assist),alpha=0.1) +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, colour = "red3")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y, colour=pass.goal_assist),alpha=0.1) +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75, alpha=0.6,colour = "red3")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y, colour=pass.goal_assist),alpha=0.1) +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75,colour = "red3")
cancha +
geom_point(data = iniesta2, aes(x=location.x, y=location.y, colour=pass.goal_assist),alpha=0.1) +
geom_segment(data = filter(iniesta2,pass.goal_assist==T), aes(x = location.x, y = location.y, xend = pass.end_location.x, yend = pass.end_location.y), size = 0.75,colour = "green")
cancha +
geom_bin2d(data = iniesta2, aes(x=location.x, y=location.y), bins=100)
cancha +
geom_bin2d(data = iniesta2, aes(x=location.x, y=location.y), bins=100)+
scale_fill_viridis_c()
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
scale_fill_viridis_c()
cancha +
geom_density_2d_filled(data = iniesta2, aes(x=location.x, y=location.y),alpha=0.6)+
scale_fill_viridis_d()
messi <- filter(data,data$player.name=="Lionel Andrés Messi Cuccittini")
messi = allclean(messi)
messi$pass.outcome.name <- ifelse(is.na(messi$pass.outcome.name), "Complete", as.character(messi$pass.outcome.name))
messi$pass.type.name <- ifelse(is.na(messi$pass.type.name),"-",as.character(messi$pass.type.name))
messi <- messi %>% filter(type.name == "Pass")
messi <- messi %>% filter(pass.type.name != "Goal Kick" & pass.type.name != "Corner" & pass.type.name != "Throw-in" & pass.type.name != "Free Kick" & pass.type.name != "Kick Off")
messi <- select(messi, location.x, location.y, pass.end_location.x, pass.end_location.y,
pass.goal_assist)
cancha +
geom_density_2d_filled(data = messi, aes(x=location.x, y=location.y),alpha=0.6)+
scale_fill_viridis_d()
cancha +
geom_density_2d_filled(data = messi, aes(x=location.x, y=location.y),alpha=0.6)+
scale_fill_viridis_d()+
guides(fill=F)+
labs(title="Mapa de calor de Lionel Messi en Barcelona")
liga <- FreeCompetitions() %>% filter(competition_id==43)
partidos <- FreeMatches(liga)
data <- StatsBombFreeEvents(MatchesDF = partidos , Parallel = T)
View(messi)
messi <- filter(data,data$player.name=="Lionel Andrés Messi Cuccittini")
messi = allclean(messi)
messi$pass.outcome.name <- ifelse(is.na(messi$pass.outcome.name), "Complete", as.character(messi$pass.outcome.name))
messi$pass.type.name <- ifelse(is.na(messi$pass.type.name),"-",as.character(messi$pass.type.name))
## Filter out by our criteria
messi <- messi %>% filter(type.name == "Pass")
messi <- messi %>% filter(pass.type.name != "Goal Kick" & pass.type.name != "Corner" & pass.type.name != "Throw-in" & pass.type.name != "Free Kick" & pass.type.name != "Kick Off")
messi <- select(messi, location.x, location.y, pass.end_location.x, pass.end_location.y,
pass.goal_assist)
cancha +
geom_density_2d_filled(data = messi, aes(x=location.x, y=location.y),alpha=0.6)+
scale_fill_viridis_d()+
guides(fill=F)+
labs(title="Mapa de calor de Lionel Messi en Argentina (Mundial Rusia 2018)")
View(iniesta)
View(create_full_pitch)
library(readxl)
library(tidyverse)
datos <-  read_excel ("C:/Users/Marto/DataScience/nico/resumen_extendido.xlsx",
sheet = 1)
base <- datos %>%
mutate(pcr_negativas_en_contactos_laborales = pcr_negativas_en_estrategia_tr - pcr_negativas_en_tr_positivo)
base$estrategia_TR <- recode(base$estrategia_TR, SAME = "Personal MSGC y SAME",
`CeSAC-CEMAR`="CeSAC-CEMAR y Detectar",
`Ministerio de Transporte` ="Agentes de tránsito",
`Detectar-Post Detectar`="CeSAC-CEMAR y Detectar",
`Personal MSGC`="Personal MSGC y SAME")
base <- base %>%
group_by(estrategia_TR) %>%
summarise(personas_pcr_positiva_con_tr_positivo = sum(personas_pcr_positiva_con_tr_positivo),
personas_pcr_positiva_en_contactos_laborales = sum(personas_pcr_positiva_en_contactos_laborales),
pcr_negativas_en_tr_positivo = sum(pcr_negativas_en_tr_positivo),
pcr_negativas_en_contactos_laborales = sum(pcr_negativas_en_contactos_laborales),
tr_positivos = sum(tr_positivos),
tr_negativos = sum(tr_negativos)) %>%
filter(estrategia_TR != "Policía carga manual")
base <- base %>%
group_by(estrategia_TR) %>%
summarise(personas_pcr_positiva_con_tr_positivo = sum(personas_pcr_positiva_con_tr_positivo),
personas_pcr_positiva_en_contactos_laborales = sum(personas_pcr_positiva_en_contactos_laborales),
pcr_negativas_en_tr_positivo = sum(pcr_negativas_en_tr_positivo),
pcr_negativas_en_contactos_laborales = sum(pcr_negativas_en_contactos_laborales),
tr_positivos = sum(tr_positivos),
tr_negativos = sum(tr_negativos)) %>%
filter(estrategia_TR != "Policía carga manual")
PCRTRpos <- base %>%
select(estrategia_TR,personas_pcr_positiva_con_tr_positivo,pcr_negativas_en_tr_positivo) %>%
gather("personas_pcr_positiva_con_tr_positivo","pcr_negativas_en_tr_positivo",key = resultado_pcr,value = n) %>%
mutate(resultado_pcr = case_when(resultado_pcr == "personas_pcr_positiva_con_tr_positivo" ~ "positivo",
TRUE ~ "negativo"))
ggplot(PCRTRpos, aes(fill=resultado_pcr, y=n, x=estrategia_TR)) +
geom_bar(position="fill", stat="identity") +
coord_flip()
View(PCRTRpos)
ggplot(PCRTRpos, aes(fill=reorder(resultado_pcr,n), y=n, x=estrategia_TR)) +
geom_bar(position="fill", stat="identity") +
coord_flip()
ggplot(PCRTRpos, aes(fill=reorder(resultado_pcr,n), y=n, x=estrategia_TR)) +
geom_bar(position="fill", stat="identity") +
coord_flip()+
guides(fill=F)
View(PCRTRpos)
ggplot(PCRTRpos, aes(fill=reorder(resultado_pcr,resultado_pcr), y=n, x=estrategia_TR)) +
geom_bar(position="fill", stat="identity") +
coord_flip()+
guides(fill=F)
PCRTRpos %>%
count(resultado_pcr)
ggplot(PCRTRpos, aes(fill=resultado_pcr, y=n, x=estrategia_TR)) +
geom_bar(position="fill", stat="identity") +
coord_flip()+
guides(fill=F)
ggplot(PCRTRpos, aes(fill=resultado_pcr, y=n, x=reorder(estrategia_TR,n))) +
geom_bar(position="fill", stat="identity") +
coord_flip()+
guides(fill=F)
ggplot(PCRTRpos, aes(fill=resultado_pcr, y=n, x=reorder(estrategia_TR,resultado_pcr))) +
geom_bar(position="fill", stat="identity") +
coord_flip()+
guides(fill=F)
reorder(PCRTRpos$estrategia_TR,PCRTRpos$resultado_pcr)
View(reorder(PCRTRpos$estrategia_TR,PCRTRpos$resultado_pcr))
df <- PCRTRpos %>%
group_by(estrategia_TR) %>%
summarise(tot=sum(n))
View(df)
PCRTRpos <- left_join(PCRTRpos,df)
View(PCRTRpos)
source('C:/Users/Marto/DataScience/nico/prueba martin.R', encoding = 'UTF-8', echo=TRUE)
PCRTRpos <-PCRTRpos %>%
left_join(df) %>%
mutate(posit=n/tot)
View(PCRTRpos)
PCRTRpos <-PCRTRpos %>%
left_join(df) %>%
mutate(posit=case_when(resultado_pcr=="negativo" ~ 0,
n/tot))
PCRTRpos <-PCRTRpos %>%
left_join(df) %>%
mutate(posit=case_when(resultado_pcr=="negativo" ~ 0,
TRUE ~ n/tot))
PCRTRpos <- base %>%
select(estrategia_TR,personas_pcr_positiva_con_tr_positivo,pcr_negativas_en_tr_positivo) %>%
gather("personas_pcr_positiva_con_tr_positivo","pcr_negativas_en_tr_positivo",key = resultado_pcr,value = n) %>%
mutate(resultado_pcr = case_when(resultado_pcr == "personas_pcr_positiva_con_tr_positivo" ~ "positivo",
TRUE ~ "negativo"))
PCRTRpos <-PCRTRpos %>%
left_join(df) %>%
mutate(posit=case_when(resultado_pcr=="negativo" ~ 0,
TRUE ~ n/tot))
View(PCRTRpos)
ggplot(PCRTRpos, aes(fill=resultado_pcr, y=n, x=reorder(estrategia_TR,tot))) +
geom_bar(position="fill", stat="identity") +
coord_flip()+
guides(fill=F)
ggplot(PCRTRpos, aes(fill=resultado_pcr, y=n, x=reorder(estrategia_TR,posit))) +
geom_bar(position="fill", stat="identity") +
coord_flip()+
guides(fill=F)
library(tidyverse)
library(sf)
library(RCurl)
#Credenciales del fileserver
pass <- "PWMsw8bbhqgP"
user <- "salud"
url <- paste0("https://",user,":",pass,"@bi-covid-jt2dwlwa.buenosaires.gob.ar/~",user,"/uploaded_files/")
result <- getURL(url,verbose=TRUE,ftp.use.epsv=TRUE, dirlistonly = TRUE)
url
# Loopeo para descargarme el último archivo disponible
if(grepl(paste0("confirmados_covid_",Sys.Date(),".csv"),result) == TRUE){
assign(paste0("confirmados_covid",Sys.Date()), value = read.csv(paste0(url,"confirmados_covid_",Sys.Date(),".csv"),sep = ";", fileEncoding = 'UTF-8'))
print("Se descargó el archivo del día de hoy")
} else {
assign(paste0("confirmados_covid",Sys.Date()-1), value = read.csv(paste0(url,"confirmados_covid_",Sys.Date()-1,".csv"),sep = ";",fileEncoding = 'UTF-8'))
print(paste("Se descargaron los datos del", Sys.Date()-1))
}
url
library(tidyverse)
df <- read.csv("data/23-27_ago_confirmados.csv", sep=";")
